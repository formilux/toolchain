PATCH_LIST=
FILE_LIST=

function do_config {
    cp makefile.linux_x86_ppc_alpha makefile.machine
}

function do_compile_only {
    $FLXPMAKE 7z 7za sfx \
        CC="$CC  \$(ALLFLAGS) $GCC_ARCH_CURRENT $GCC_CPU_CURRENT $GCC_OPT_FAST" \
        CXX="${CXX:-g++} \$(ALLFLAGS) $GCC_ARCH_CURRENT $GCC_CPU_CURRENT $GCC_OPT_FAST"
}

function do_prepack {
    $FLXMAKE install \
        DEST_BIN=$ROOTDIR/usr/bin \
        DEST_SHARE=$ROOTDIR/usr/share/$PKGRADIX \
        DEST_MAN=$ROOTDIR/usr/man

    # 7z uses external .so files, so it must be executed from
    # its real directory
    if [ -x $ROOTDIR/usr/share/$PKGRADIX/7z ]; then
      echo "#!/bin/sh" > $ROOTDIR/usr/bin/7z
      echo "exec \${0%\${0##*/}}../share/$PKGRADIX/7z \"\$@\"" >> $ROOTDIR/usr/bin/7z
    fi

    # 7za contains everything linked in.
    if [ -x $ROOTDIR/usr/share/$PKGRADIX/7za ]; then
      rm -f $ROOTDIR/usr/bin/7za
      mv $ROOTDIR/usr/share/$PKGRADIX/7za $ROOTDIR/usr/bin/
    fi

    set_default_perm $ROOTDIR
}

